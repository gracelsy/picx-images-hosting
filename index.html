<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>图片列表</title>

<style>
body {
  font-family: system-ui, -apple-system;
  padding: 20px;
  background: #f5f5f5;
}

h1 {
  margin-bottom: 12px;
}

input {
  padding: 8px 10px;
  width: 320px;
  max-width: 100%;
  font-size: 14px;
}

.grid {
  margin-top: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.card {
  background: #fff;
  border-radius: 10px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 2px 6px rgba(0,0,0,.06);
}

.card img {
  width: 100%;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  background: #eee;
}

.meta {
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.filename {
  font-size: 13px;
  color: #333;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  cursor: pointer;
}

.filename:hover {
  text-decoration: underline;
}

button {
  font-size: 12px;
  padding: 6px;
  cursor: pointer;
}

.pagination {
  margin-top: 20px;
}

.pagination button {
  margin-right: 6px;
  margin-bottom: 6px;
}

@media (max-width: 480px) {
  .grid {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  }
}
</style>
</head>

<body>

<h1>图片列表</h1>

<input id="search" placeholder="搜索文件名…" />

<div class="grid" id="grid"></div>
<div class="pagination" id="pagination"></div>

<script>
const PAGE_SIZE = 24;
let images = [];
let filtered = [];
let page = 1;

fetch("images.json")
  .then(r => r.json())
  .then(data => {
    images = data;
    filtered = images;
    render();
  });

document.getElementById("search").addEventListener("input", e => {
  const q = e.target.value.toLowerCase();
  filtered = images.filter(f => f.toLowerCase().includes(q));
  page = 1;
  render();
});

function render() {
  const grid = document.getElementById("grid");
  grid.innerHTML = "";

  const start = (page - 1) * PAGE_SIZE;
  const items = filtered.slice(start, start + PAGE_SIZE);

  for (const f of items) {
    grid.innerHTML += `
      <div class="card">
        <img src="${f}" loading="lazy" alt="${f}">
        <div class="meta">
          <div class="filename"
               title="${f}"
               onclick="navigator.clipboard.writeText(location.origin + '/${f}')">
            ${f}
          </div>
          <button onclick="navigator.clipboard.writeText(location.origin + '/${f}')">
            复制链接
          </button>
        </div>
      </div>`;
  }

  renderPagination();
}

function renderPagination() {
  const total = Math.ceil(filtered.length / PAGE_SIZE);
  const p = document.getElementById("pagination");
  p.innerHTML = "";

  for (let i = 1; i <= total; i++) {
    const btn = document.createElement("button");
    btn.textContent = i;
    if (i === page) btn.disabled = true;
    btn.onclick = () => {
      page = i;
      render();
    };
    p.appendChild(btn);
  }
}
</script>

</body>
</html>